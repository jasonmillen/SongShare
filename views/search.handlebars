<!--<script src="/test.js"></script>
<script src="/bundle.js"></script>
<script src="/spotify-web-api.js"></script> -->

<div class="container" class="form-horizontal" role="form"
enctype="multipart/form-data">
  <h2>Search for a track</h2>
  <form id="songSearchForm">
    <div class="form-group">
      <label for="artist">Artist</label>
      <input type="text" class="form-control" id="artist" placeholder="Enter name of artist">
    </div>
    <div class="form-group">
      <label for="track">Track</label>
      <input type="text" class="form-control" id="track" placeholder="Enter name of track">
    </div>
    <button type="submit" class="btn btn-default" id="search">Search</button>
  </form>
</div>

<br/>

<iframe style="float:left;" id="song" src="https://embed.spotify.com/?uri=spotify:track:5JunxkcjfCYcY7xJ29tLai" frameborder="0" allowtransparency="true"></iframe>

<div style="float:left;" class="dropdown">
  <button class="btn btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
    Share With Group
    <span class="caret"></span>
  </button>
  <ul class="dropdown-menu" aria-labelledby="dropdownMenu1">
    <li><a href="#">Action</a></li>
    <li><a href="#">Another action</a></li>
    <li><a href="#">Something else here</a></li>
  </ul>
</div>

<script type="text/javascript">
  $('#search').on('click', function (e) {
    e.preventDefault();
    var searchString = "https://api.spotify.com/v1/search?q=";
    var artist = document.getElementById('artist').value;
    var track = document.getElementById('track').value;
    searchString += artist + "+" + track + "&type=track&limit=1";

    $.get(searchString, function (data, status) {
      var elem = document.getElementById('song');
      elem.src = "http://embed.spotify.com/?uri=spotify:track:" + data.tracks.items[0].id;

    });
  });


</script>